---
title: Copy User Roles
category: SQL
tags: [peopletools, peoplesoft]
is_angular: false
---

```sql
/*
Created By: Jedder Brazal
Created On: 2013/02/04
*/
DECLARE @SOURCE AS VARCHAR(12)
DECLARE @TARGET AS VARCHAR(12)

SET @SOURCE =  'SRCID'
SET @TARGET =  'TGTID'


--SELECT @SOURCE
--SELECT @TARGET

INSERT INTO PSROLEUSER

select @TARGET, ROLENAME, DYNAMIC_SW from PSROLEUSER A
WHERE ROLEUSER = @SOURCE 
AND NOT EXISTS (SELECT 'X' FROM PSROLEUSER B
				WHERE B.ROLENAME = A.ROLENAME 
				AND B.ROLEUSER = @TARGET)

/*
select S.DEFAULTNAVHP -- NAVIGATOR HOMEPAGE
 , S.OPRCLASS -- PRIMARY
 , S.PRCSPRFLCLS -- PROCESS PROFILE
 , S.ROWSECCLASS --ROW SECURITY 

	from PSOPRDEFN S
	, PSOPRDEFN T
where S.OPRID = @SOURCE 
and T.OPRID = @TARGET 
	*/
--
UPDATE T
SET T.DEFAULTNAVHP = S.DEFAULTNAVHP -- NAVIGATOR HOMEPAGE
 ,  T.OPRCLASS     = S.OPRCLASS     -- PRIMARY
 ,  T.PRCSPRFLCLS  = S.PRCSPRFLCLS  -- PROCESS PROFILE
 ,  T.ROWSECCLASS  = S.ROWSECCLASS  --ROW SECURITY 

	from PSOPRDEFN S
	, PSOPRDEFN T
where S.OPRID = @SOURCE 
and T.OPRID = @TARGET
```